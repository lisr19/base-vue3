<template>
  <svg width="226px" height="226px">
    <defs>
      <filter
          id="32609941_backgroundShadow"
          x="-200%"
          y="-200%"
          width="500%"
          height="500%"
      >
        <feOffset
            result="offOut"
            in="SourceGraphic"
            dx="0"
            dy="0"
        />
        <feGaussianBlur
            result="blurOut"
            in="offOut"
            stdDeviation="3"
        />
        <feBlend
            in2="blurOut"
            mode="multiply"
        />
      </filter>
    </defs>
    <g>
      <path
          v-for="(item, index) in pathL"
          :key="index"
          :d="item.path"
          stoke="none"
          :fill="item.fill"
          :filter="item.filter"
      />
    </g>
    <g>
      <path
          v-for="(item, index) in pathD"
          :key="index"
          :d="item.path"
          stoke="none"
          :fill="item.fill"
      />
    </g>
  </svg>
</template>

<script>
export default {
  name: 'SvgRing',
  components: {},
  props: {
    value: {
      type: Number,
      default: () => {
        return 50
      }
    },
    color: {
      type: String,
      default: '#00EFFF'
    },
    hasBlur: {
      type: Boolean,
      default: false
    }
  },
  data () {
    return {
      // 基础路径
      paths: [
        'M194 118.5 A80 80 0 0 1 192.78462024097664 132.39185421335443 L175.0580806867569 129.2661870153497 A62 62 0 0 0 176 118.5Z',
        'M191.62365810207973 137.8537516479734 A80 80 0 0 1 187.08363661140805 151.038931446064 L170.63981837384125 143.7176718706996 A62 62 0 0 0 174.15833502911178 133.4991575271794Z',
        'M184.63580742871414 156.05772502287127 A80 80 0 0 1 177.04086028853774 167.75291802605267 L162.85666672361674 156.67101147019082 A62 62 0 0 0 168.74275075725348 147.60723689272524Z',
        'M173.45158603819152 172.03044850870867 A80 80 0 0 1 163.25291802605267 181.54086028853774 L152.17101147019082 167.35666672361674 A62 62 0 0 0 160.07497917959844 159.9860975942492Z',
        'M158.73543227765975 184.82300580440335 A80 80 0 0 1 146.53893144606403 191.58363661140805 L139.21767187069963 175.13981837384125 A62 62 0 0 0 148.6699600151863 169.9003294984126Z',
        'M141.36161146605352 193.67540966287265 A80 80 0 0 1 127.89185421335443 197.28462024097664 L124.76618701534969 179.5580806867569 A62 62 0 0 0 135.20524888619147 176.7609424887263Z',
        'M122.36227706141227 198.06175162946187 A80 80 0 0 1 108.41948210046998 198.30512402078594 L109.67509862786423 180.3489711161091 A62 62 0 0 0 120.48076472259451 180.16035751283295Z',
        'M102.86615192319479 197.72144549932563 A80 80 0 0 1 89.27864045000422 194.5845213036123 L94.84094634875326 177.46550401029953 A62 62 0 0 0 105.37126774047596 179.89662026197738Z',
        'M84.03147252672704 192.674708365343 A80 80 0 0 1 71.60645886134361 186.3438476925141 L81.1450056175413 171.07898196169842 A62 62 0 0 0 90.77439120821344 175.9853989831408Z',
        'M66.97717981660216 183.22135954999578 A80 80 0 0 1 56.45281597290792 174.0726696367198 L69.40093237900365 161.56881896845783 A62 62 0 0 0 77.55731435786667 168.65905365124675Z',
        'M52.71644455048177 169.92300877492318 A80 80 0 0 1 44.7179676972449 158.5 L60.3064249653648 149.5 A62 62 0 0 0 66.50524452662337 158.35283180056544Z',
        'M42.096476296066655 153.5696917431262 A80 80 0 0 1 37.09906432493449 140.55098846535992 L54.40177485182423 135.58951606065395 A62 62 0 0 0 58.274769129451656 145.67901110092282Z',
        'M35.748191941295545 135.13293526542074 A80 80 0 0 1 34.048733838472344 121.29195973620008 L52.03776872481606 120.66376879555507 A62 62 0 0 0 53.35484875450405 131.39052483070108Z',
        'M34.048733838472344 115.70804026379993 A80 80 0 0 1 35.748191941295545 101.86706473457927 L53.35484875450405 105.60947516929893 A62 62 0 0 0 52.03776872481606 116.33623120444494Z',
        'M37.099064324934474 96.4490115346401 A80 80 0 0 1 42.096476296066626 83.43030825687384 L58.274769129451634 91.32098889907722 A62 62 0 0 0 54.40177485182422 101.41048393934608Z',
        'M44.717967697244916 78.5 A80 80 0 0 1 52.716444550481754 67.07699122507685 L66.50524452662336 78.64716819943456 A62 62 0 0 0 60.306424965364805 87.5Z',
        'M56.45281597290791 62.92733036328021 A80 80 0 0 1 66.97717981660213 53.77864045000422 L77.55731435786666 68.34094634875326 A62 62 0 0 0 69.40093237900363 75.43118103154217Z',
        'M71.6064588613436 50.656152307485925 A80 80 0 0 1 84.03147252672701 44.32529163465702 L90.77439120821344 61.01460101685919 A62 62 0 0 0 81.14500561754129 65.92101803830158Z',
        'M89.27864045000419 42.41547869638772 A80 80 0 0 1 102.86615192319474 39.278554500674375 L105.37126774047591 57.103379738022646 A62 62 0 0 0 94.84094634875325 59.53449598970048Z',
        'M108.41948210046995 38.69487597921406 A80 80 0 0 1 122.36227706141231 38.93824837053813 L120.48076472259454 56.839642487167055 A62 62 0 0 0 109.67509862786422 56.6510288838909Z',
        'M127.89185421335439 39.71537975902335 A80 80 0 0 1 141.36161146605352 43.32459033712733 L135.20524888619147 60.239057511273685 A62 62 0 0 0 124.76618701534966 57.4419193132431Z',
        'M146.538931446064 45.41636338859192 A80 80 0 0 1 158.73543227765975 52.17699419559668 L148.66996001518632 67.09967050158741 A62 62 0 0 0 139.21767187069958 61.860181626158735Z',
        'M163.2529180260526 55.459139711462214 A80 80 0 0 1 173.4515860381915 64.9695514912913 L160.07497917959842 77.01390240575076 A62 62 0 0 0 152.1710114701908 69.64333327638322Z',
        'M177.04086028853777 69.24708197394735 A80 80 0 0 1 184.63580742871414 80.94227497712873 L168.74275075725348 89.39276310727477 A62 62 0 0 0 162.85666672361677 80.3289885298092Z',
        'M187.08363661140808 85.96106855393599 A80 80 0 0 1 191.62365810207973 99.14624835202657 L174.15833502911178 103.5008424728206 A62 62 0 0 0 170.63981837384125 93.2823281293004Z',
        'M192.78462024097664 104.60814578664557 A80 80 0 0 1 194 118.49999999999999 L176 118.49999999999999 A62 62 0 0 0 175.0580806867569 107.73381298465031Z'
      ],
      // 发光路径
      pathL: [],
      // 底色路径
      pathD: []
    }
  },
  computed:{
    mainColor (){
      return this.hexToRgba(this.color)
    }
  },
  mounted () {
    this.init()
  },
  methods: {
    init () {
      const { value, paths } = this
      const p = value / 100 // 比率
      const index = Math.ceil(p * (paths.length - 1)) // 获取路径分隔索引
      for (let i = 0; i < paths.length; i++) {
        const objL = {
          path: paths[i],
          fill: i < index ? this.mainColor : 'RGBA(0,104,195,0.13)',
          filter: (i < index && this.hasBlur) ? 'url(#32609941_backgroundShadow)' : 'none'
        }
        this.pathL.push(objL)

        const objD = {
          path: paths[i],
          fill: i < index ? this.mainColor : 'RGBA(0,104,195,0.13)'
        }

        this.pathD.push(objD)
      }
    },
    hexToRgba(hex, opacity = 1) {
      return 'rgba(' + parseInt('0x' + hex.slice(1, 3)) + ',' + parseInt('0x' + hex.slice(3, 5)) + ',' +
          parseInt('0x' + hex.slice(5, 7)) + ',' + opacity + ')'
    }
  }
}
</script>

<style lang="scss" type="text/scss">

</style>
